{
  "task_type": "quantile_forecast",
  "forecast": {
    "H": 24,
    "quantiles": [
      0.1,
      0.5,
      0.9
    ],
    "signal_horizon": 24,
    "q_indices": {
      "q10": 0,
      "q50": 1,
      "q90": 2
    },
    "val_pinball": 0.00729698041610669,
    "test_pinball": 0.005643307306623663,
    "val_mae_at_signal": 0.03178837150335312,
    "test_mae_at_signal": 0.023699553683400154
  },
  "signal": {
    "score_definition": "score = mu / max(iqr, eps), long if score>=thr and mu>0",
    "eps": 1e-06,
    "selected_threshold": 0.0304168239235878,
    "threshold_sweep": [
      {
        "threshold": 0.029846254736185074,
        "val_trading": {
          "avg_daily_return": 0.0018943953276185125,
          "cumulative_return": 0.4879658591429412,
          "sharpe": 0.905624687600469,
          "hit_ratio": 0.49846153846153846,
          "avg_return_in_position": 0.0021042360408316404,
          "in_position_rate": 0.9002770083102493
        },
        "test_trading": {
          "avg_daily_return": 0.0002094855674685298,
          "cumulative_return": -0.008219613404598758,
          "sharpe": 0.18441128671800258,
          "hit_ratio": 0.48936170212765956,
          "avg_return_in_position": 0.0005363424812492154,
          "in_position_rate": 0.39058171745152354
        },
        "selection_score": 0.905624687600469,
        "val_long_rate": 0.9002770083102493,
        "test_long_rate": 0.39058171745152354
      },
      {
        "threshold": 0.0304168239235878,
        "val_trading": {
          "avg_daily_return": 0.0019418703118519519,
          "cumulative_return": 0.5401254395326929,
          "sharpe": 0.9579181879941342,
          "hit_ratio": 0.4982698961937716,
          "avg_return_in_position": 0.002425658071206073,
          "in_position_rate": 0.8005540166204986
        },
        "test_trading": {
          "avg_daily_return": -4.454947092465474e-05,
          "cumulative_return": -0.07149223770131252,
          "sharpe": -0.04716912774352765,
          "hit_ratio": 0.5,
          "avg_return_in_position": -0.00014620326367091146,
          "in_position_rate": 0.3047091412742382
        },
        "selection_score": 0.9579181879941342,
        "val_long_rate": 0.8005540166204986,
        "test_long_rate": 0.3047091412742382
      },
      {
        "threshold": 0.03072230890393257,
        "val_trading": {
          "avg_daily_return": 0.001450072432226915,
          "cumulative_return": 0.30190684509507304,
          "sharpe": 0.7280452649311175,
          "hit_ratio": 0.4980237154150198,
          "avg_return_in_position": 0.0020690756839285237,
          "in_position_rate": 0.7008310249307479
        },
        "test_trading": {
          "avg_daily_return": -4.1858086233944984e-05,
          "cumulative_return": -0.06545415936289001,
          "sharpe": -0.04657780473652172,
          "hit_ratio": 0.5227272727272727,
          "avg_return_in_position": -0.0001717132855733416,
          "in_position_rate": 0.24376731301939059
        },
        "selection_score": 0.7280452649311175,
        "val_long_rate": 0.7008310249307479,
        "test_long_rate": 0.24376731301939059
      },
      {
        "threshold": 0.031084517017006874,
        "val_trading": {
          "avg_daily_return": 0.00044606598001974303,
          "cumulative_return": -0.053353405227416606,
          "sharpe": 0.24673067927389777,
          "hit_ratio": 0.4976958525345622,
          "avg_return_in_position": 0.0007420728976365321,
          "in_position_rate": 0.6011080332409973
        },
        "test_trading": {
          "avg_daily_return": 9.66262718244159e-05,
          "cumulative_return": -0.014410438591226926,
          "sharpe": 0.11081904513125997,
          "hit_ratio": 0.5324675324675324,
          "avg_return_in_position": 0.00045301407959239063,
          "in_position_rate": 0.21329639889196675
        },
        "selection_score": 0.24673067927389777,
        "val_long_rate": 0.6011080332409973,
        "test_long_rate": 0.21329639889196675
      },
      {
        "threshold": 0.031347934156656265,
        "val_trading": {
          "avg_daily_return": -0.0007363827464187092,
          "cumulative_return": -0.360380527942451,
          "sharpe": -0.44496710005980766,
          "hit_ratio": 0.44751381215469616,
          "avg_return_in_position": -0.0014686970798737783,
          "in_position_rate": 0.5013850415512465
        },
        "test_trading": {
          "avg_daily_return": 0.00024585477450130743,
          "cumulative_return": 0.04455857371151106,
          "sharpe": 0.2946952544695384,
          "hit_ratio": 0.5454545454545454,
          "avg_return_in_position": 0.0013447511150753322,
          "in_position_rate": 0.18282548476454294
        },
        "selection_score": -0.44496710005980766,
        "val_long_rate": 0.5013850415512465,
        "test_long_rate": 0.18282548476454294
      },
      {
        "threshold": 0.03161967918276787,
        "val_trading": {
          "avg_daily_return": -0.0006001658943445747,
          "cumulative_return": -0.295415816206374,
          "sharpe": -0.4203602768501299,
          "hit_ratio": 0.4206896551724138,
          "avg_return_in_position": -0.0014942061231613202,
          "in_position_rate": 0.40166204986149584
        },
        "test_trading": {
          "avg_daily_return": 0.00026870803320200174,
          "cumulative_return": 0.054614041260413915,
          "sharpe": 0.3268749660746275,
          "hit_ratio": 0.5714285714285714,
          "avg_return_in_position": 0.0017322071426057615,
          "in_position_rate": 0.15512465373961218
        },
        "selection_score": -0.4203602768501299,
        "val_long_rate": 0.40166204986149584,
        "test_long_rate": 0.15512465373961218
      },
      {
        "threshold": 0.03192771598696709,
        "val_trading": {
          "avg_daily_return": -0.0008035098267468985,
          "cumulative_return": -0.3310413375661564,
          "sharpe": -0.6156482057134451,
          "hit_ratio": 0.3761467889908257,
          "avg_return_in_position": -0.0026611655729874336,
          "in_position_rate": 0.30193905817174516
        },
        "test_trading": {
          "avg_daily_return": 0.00010981074420329806,
          "cumulative_return": -0.0027164291436289068,
          "sharpe": 0.13584258872549512,
          "hit_ratio": 0.5652173913043478,
          "avg_return_in_position": 0.0008617756229867523,
          "in_position_rate": 0.12742382271468145
        },
        "selection_score": -0.6156482057134451,
        "val_long_rate": 0.30193905817174516,
        "test_long_rate": 0.12742382271468145
      },
      {
        "threshold": 0.032325100153684616,
        "val_trading": {
          "avg_daily_return": -0.0007399216305431589,
          "cumulative_return": -0.30048346766329626,
          "sharpe": -0.6329223069979549,
          "hit_ratio": 0.3835616438356164,
          "avg_return_in_position": -0.0036590645017271282,
          "in_position_rate": 0.20221606648199447
        },
        "test_trading": {
          "avg_daily_return": -0.00021168860201104225,
          "cumulative_return": -0.09530123325788542,
          "sharpe": -0.35476756909886975,
          "hit_ratio": 0.5428571428571428,
          "avg_return_in_position": -0.002183416723599606,
          "in_position_rate": 0.09695290858725762
        },
        "selection_score": -0.6329223069979549,
        "val_long_rate": 0.20221606648199447,
        "test_long_rate": 0.09695290858725762
      },
      {
        "threshold": 0.032822251319885254,
        "val_trading": {
          "avg_daily_return": -0.0004288811942636382,
          "cumulative_return": -0.19107550874528467,
          "sharpe": -0.46231041119594085,
          "hit_ratio": 0.40540540540540543,
          "avg_return_in_position": -0.004184489489977659,
          "in_position_rate": 0.10249307479224377
        },
        "test_trading": {
          "avg_daily_return": 0.0002190646061373746,
          "cumulative_return": 0.06758248797276156,
          "sharpe": 0.4796367543856856,
          "hit_ratio": 0.6363636363636364,
          "avg_return_in_position": 0.0035946510370723755,
          "in_position_rate": 0.060941828254847646
        },
        "selection_score": -0.46231041119594085,
        "val_long_rate": 0.10249307479224377,
        "test_long_rate": 0.060941828254847646
      },
      {
        "threshold": 0.033034320920705795,
        "val_trading": {
          "avg_daily_return": -0.0008388664239588764,
          "cumulative_return": -0.28019154153191794,
          "sharpe": -1.3465099452749298,
          "hit_ratio": 0.3157894736842105,
          "avg_return_in_position": -0.015938462055218653,
          "in_position_rate": 0.05263157894736842
        },
        "test_trading": {
          "avg_daily_return": 0.00012898287932991295,
          "cumulative_return": 0.03364823891754187,
          "sharpe": 0.2846295378822523,
          "hit_ratio": 0.6111111111111112,
          "avg_return_in_position": 0.0025868233021165876,
          "in_position_rate": 0.04986149584487535
        },
        "selection_score": -1.3465099452749298,
        "val_long_rate": 0.05263157894736842,
        "test_long_rate": 0.04986149584487535
      }
    ],
    "val_trading_metrics": {
      "avg_daily_return": 0.0019418703118519519,
      "cumulative_return": 0.5401254395326929,
      "sharpe": 0.9579181879941342,
      "hit_ratio": 0.4982698961937716,
      "avg_return_in_position": 0.002425658071206073,
      "in_position_rate": 0.8005540166204986
    },
    "test_trading_metrics": {
      "avg_daily_return": -4.454947092465474e-05,
      "cumulative_return": -0.07149223770131252,
      "sharpe": -0.04716912774352765,
      "hit_ratio": 0.5,
      "avg_return_in_position": -0.00014620326367091146,
      "in_position_rate": 0.3047091412742382
    }
  },
  "costs_and_baselines": {
    "trading_days_per_year": 365,
    "cost_bps": 5.0,
    "slippage_bps": 2.0,
    "strategy_long_rate": {
      "val": 0.8005540166204986,
      "test": 0.3047091412742382
    },
    "strategy_net": {
      "val": {
        "cumulative_return": 0.49548237933399153,
        "sharpe": 0.917648276193983,
        "cagr": 0.5021660250608919,
        "volatility": 0.739996924387577,
        "max_drawdown": 0.5118103941009357,
        "hit_rate": 0.4982698961937716,
        "avg_trade_return": 0.002374793019302958
      },
      "test": {
        "cumulative_return": -0.09590406347260882,
        "sharpe": -0.1251480806747908,
        "cagr": -0.0969134803943783,
        "volatility": 0.3448338440103393,
        "max_drawdown": 0.3563064387780759,
        "hit_rate": 0.5,
        "avg_trade_return": -0.0002671123545800026
      }
    },
    "buy_hold_net": {
      "val": {
        "cumulative_return": 0.43907876157836023,
        "sharpe": 0.8576344289488267,
        "cagr": 0.44489468415118694,
        "volatility": 0.8088813171479041,
        "max_drawdown": 0.5315393556769157,
        "hit_rate": 0.5069252077562327,
        "avg_trade_return": 0.0019006149767658016
      },
      "test": {
        "cumulative_return": -0.6398491420431404,
        "sharpe": -1.2803248756434737,
        "cagr": -0.6439014920276128,
        "volatility": 0.6425276555321645,
        "max_drawdown": 0.6677922866694599,
        "hit_rate": 0.4598337950138504,
        "avg_trade_return": -0.002253819563470442
      }
    },
    "random_baseline_summary": {
      "val": {
        "runs": 1000,
        "long_rate": 0.8005540166204986,
        "sharpe_mean": 0.6290625610141849,
        "sharpe_median": 0.6102624492422932,
        "sharpe_p95": 1.3824321673865871,
        "cumulative_return_mean": 0.28049672693849426,
        "cumulative_return_median": 0.1964047023962865,
        "cumulative_return_p95": 1.0716977301690895
      },
      "test": {
        "runs": 1000,
        "long_rate": 0.3047091412742382,
        "sharpe_mean": -1.0144147523042613,
        "sharpe_median": -1.0473846667731497,
        "sharpe_p95": 0.4240450775223852,
        "cumulative_return_mean": -0.31064418771848556,
        "cumulative_return_median": -0.34448391559093267,
        "cumulative_return_p95": 0.08649340954823136
      }
    }
  }
}